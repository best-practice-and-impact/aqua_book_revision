::: {.callout-important}
This version of the AQuA book is a preliminary ALPHA draft.  It is still in development, and we are still working to ensure that it meets user needs. 

The draft currently has no official status. It is a work in progress and is subject to further revision and reconfiguration (possibly substantial change) before it is finalised. 
:::

# Design

## Introduction and summary

The design phase is where the Analyst translates the scope for the analysis agreed with the Commissioner into an actionable plan of work. This chapter sets out recommended practices around designing the analysis and associated assurance activities, documenting the design and assuring the design. It also discusses considerations around the treatment of uncertainty in design, and design of multi-use and AI models.

### The Analyst's responsibilities during the design phase
The Analyst should develop the method and plan how to address the Commissioner’s needs, what the assurance requirements will be and plan for sufficient time for the assurance activity. The analyst is responsible for documenting the analytical plan in a proportionate manner.

### The Assurer's responsibilities during the design phase
The Assurer should review the analytical plan to ensure that they are able to conduct the required assurance activities. They may provide feedback to the analyst on the design. The Assurer should plan sufficient time for the assurance activity. 

### The Commissioner's responsibilities during the design phase
The Commissioner should review the approach described in the analytical plan, and confirm that the analytical approach will satisfy their need.


### The Approver's responsibilities during the design phase
The Approver should note the new project and ensure that required mechanisms are in place for the appropriate assurance to take place. For example, they should ensure that the Analyst and Assurer are aware of local assurance protocols.    

## Designing the analysis

The Analyst translates the scope for the analysis agreed with the Commissioner into an actionable plan of work.   The Engagement and Scoping stage provides the Analyst with an understanding of the Commissioner's requirements in terms of outputs to be delivered, including acceptable levels of accuracy, precision and margins of error. During the design phase, the Analyst will translate the delivery of the agreed outputs into an analytical plan. The analytical plan should consider:

* Methodology for producing results, including the treatment of uncertainty;
* Project management approach (for example Agile, Waterfall or a combination of approaches);
* Sourcing of inputs and assumptions;
* Data and file management;
* Change management and version control;
* Code management, documentation and testing;
* Communication between stakeholders;
* Verification and validation procedures during the project lifetime;
* Documentation to be delivered;
* Process for updating the Analytical Plan;
* Ethics;
* Reporting;
* Downstream application.

Designing the assurance activities for subsequent analytical phases is a key part of the design phase. The design of the assurance should take into account the principles of [proportionality](./proportionality.qmd). 

Iteration between the Commissioner and the Analyst is normal and expected whilst the analytical design develops. 

The Commissioner's domain expertise can be a useful resource for the analyst in the design phase. For example, they can have information regarding the input assumptions, data requirements and the most effective ways to present the outputs, all of which can inform the design.

On completion of the design phase, the Assurer should be aware of the quality assurance tasks that will be required of them during the project lifetime and have assured the necessary elements of the Analytical plan.

### Reproducible analytical pipelines

The recommended approach for developing analysis in code is to use a [Reproducible Analytical Pipeline (RAP)](https://analysisfunction.civilservice.gov.uk/support/reproducible-analytical-pipelines/). Reproducible Analytical Pipelines shall:

* Follow the practices set out in the [Analysis Function Quality Assurance of Code for Analysis and Research manual](https://best-practice-and-impact.github.io/qa-of-code-guidance/intro.html).
* Meet the requirements of the [Reproducible Analytical Pipelines minimum viable product](https://github.com/best-practice-and-impact/rap_mvp_maturity_guidance/blob/master/Reproducible-Analytical-Pipelines-MVP.md).


## Documenting the design of the analysis

The design process should be documented in a proportionate manner. A design document that records the analytical plan should be produced by the Analyst, and signed-off by the commissioner. The design document may be reviewed by the Assurer, particularly in the case of more complex analysis.

It is best practice to use formal version control to track changes in the design document. 


## Assuring the design phase

The assurance of the design phase should consider whether the analytical plan:  

* Delivers as intended
* Adequately addresses the complexities of the customer issue for this purpose 
* Is well-structured for the purpose, data driven, and reflects a robust overall design.

The assurance of the design may be carried out by the Assurer. For more complex analysis, it is good practice to engage subject matter experts to provide independent assurance, and to ensure the accuracy and limitations of the chosen methods are understood, ideally with tests baselining their response against independent reference cases.



 




## Treatement of uncertainty in the design phase

During the design phase, Analysts should examine the planned analysis systematically for possible sources and types of uncertainty, to maximise the chance of identifying all that are sufficiently large to breach the acceptable margin of error.

Analysts should make sure that they report identified sources of uncertainty appropriately and proportionately to enable an assessment of whether results are within the Commissioner’s acceptable margin of error.

The [Uncertainty Toolkit for Analysts](https://analystsuncertaintytoolkit.github.io/UncertaintyWeb/index.html) provides advice on the treatment of uncertainty. Other authorities provide guidance for specific purposes, such as the [Office for Statistics Regulation's Approaches to presenting uncertainty in the statistical system](https://osr.statisticsauthority.gov.uk/publication/approaches-to-presenting-uncertainty-in-the-statistical-system/pages/1/).




## Multi-use models and the design phase

Designing multi-use models should take into account the needs of all users of the analysis. An Analysis Steering Group can be an effective means for communication about the design with a range of user groups. 

The design of multi-use models may entail a modular structure with different analysts and assurers responsible for different elements. The design of assurance activities should capture both the assurance of individual modules and their integration.

## Artificial intelligence and the design phase

Artificial Intelligence (AI) and some classes of Machine Learning (ML)  methods have opaque algorithms processing their inputs. These belong to a class of models known as “black boxes” - devices, systems, or objects which produce useful information without revealing any information about their internal workings.

Using a black box model places greater weight on the design of the analysis and the assurance and validation of outputs by domain experts, particularly Assurers, Approvers and Commissioners.    This [guidance](https://www.gov.uk/government/publications/introduction-to-ai-assurance/introduction-to-ai-assurance) outlines considerations for the design of AI models, including risk assessment, impact assessment, bias audits and compliance audits.
